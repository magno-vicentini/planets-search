(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(20)},16:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),u=Object(n.createContext)();a(16);var o=function(){var e=Object(n.useContext)(u).planets;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"Url"))),r.a.createElement("tbody",null,e.map((function(e){var t=e.name,a=e.rotation_period,n=e.diameter,l=e.climate,c=e.gravity,u=e.terrain,o=e.surface_water,i=e.orbital_period,m=e.population,s=e.films,d=e.created,f=e.edited,b=e.url;return r.a.createElement("tr",{key:t,className:"table-search"},r.a.createElement("td",{"data-testid":"planet-name"},t),r.a.createElement("td",null,a),r.a.createElement("td",null,i),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,u),r.a.createElement("td",null,o),r.a.createElement("td",null,m),r.a.createElement("td",null,s),r.a.createElement("td",null,d),r.a.createElement("td",null,f),r.a.createElement("td",null,b))}))))},i=a(3),m=a(5),s=a(1),d=a(7),f=a.n(d),b=a(10),p=a(2),E=function(e,t,a){var r=t.filterByNumericValues;Object(n.useEffect)((function(){r.length&&r.forEach((function(t){var n=t.comparison,r=t.column,l=t.value,c=a.filter((function(e){switch(n){case"maior que":return Number(e[r])>Number(l);case"menor que":return Number(e[r])<Number(l);case"igual a":return Number(e[r])===Number(l);default:return!0}}));e(c)}))}),[t])};var h=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(p.a)(a,2),c=l[0],o=l[1],d=Object(n.useState)([]),h=Object(p.a)(d,2),O=h[0],j=h[1],v=Object(n.useState)({filterByName:{name:""}}),y=Object(p.a)(v,2),N=y[0],C=y[1],S=Object(n.useState)({filterByNumericValues:[]}),F=Object(p.a)(S,2),g=F[0],k=F[1],B=Object(n.useState)([]),x=Object(p.a)(B,2),w=x[0],D=x[1],V=N.filterByName;Object(n.useEffect)((function(){(function(){var e=Object(b.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json()}));case 2:t=e.sent,a=t.results,j(a),o(a.sort((function(e,t){return e.name>t.name?1:-1})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[-1]),Object(n.useEffect)((function(){o(O.filter((function(e){return e.name.includes(V.name)})))}),[O,V]),E(o,g,c);var _=["population","orbital_period","diameter","rotation_period","surface_water"],q=Object(n.useState)(_),P=Object(p.a)(q,2),A=P[0],J=P[1],W=Object(n.useState)({column:"population",comparison:"maior que",value:0}),G=Object(p.a)(W,2),I=G[0],R=G[1],T=Object(n.useState)({column:"population",sort:"ASC"}),U=Object(p.a)(T,2),X=U[0],z=U[1],H=Object(n.useState)({order:{}}),K=Object(p.a)(H,2),L=K[0],M=K[1],Q={planets:c,handleFilterName:function(e){var t=e.target.value;C(Object(s.a)(Object(s.a)({},N),{},{filterByName:{name:t}}))},handleColumnFilter:function(e){var t=e.target,a=t.value,n=t.name;R(Object(s.a)(Object(s.a)({},I),{},Object(m.a)({},n,a)))},applyFilterNumber:function(){J(A.filter((function(e){return e!==I.column}))),k(Object(s.a)(Object(s.a)({},g),{},{filterByNumericValues:[].concat(Object(i.a)(g.filterByNumericValues),[I])})),D([].concat(Object(i.a)(w),[I]))},numberFilter:A,deletedFilter:w,restoreFilter:function(e){o(O),D(Object(i.a)(w.filter((function(t){return t!==e})))),k(Object(s.a)(Object(s.a)({},g),{},{filterByNumericValues:Object(i.a)(g.filterByNumericValues.filter((function(t){return t!==e})))})),J([].concat(Object(i.a)(A),[e.column])),R(Object(s.a)(Object(s.a)({},I),{},{column:A[0]}))},filterByNumber:I,handleSortFilter:function(e){var t=e.target,a=t.value,n=t.name;z(Object(s.a)(Object(s.a)({},X),{},Object(m.a)({},n,a)))},applyFilterOrder:function(){var e=X.column,t=X.sort;M(Object(s.a)(Object(s.a)({},L),{},{order:X})),"ASC"===t&&o(c.sort((function(t,a){return t[e]-a[e]}))),"DESC"===t&&o(c.sort((function(t,a){return a[e]-t[e]})))},filtersColumn:_};return r.a.createElement(u.Provider,{value:Q},t)};a(18);function O(){var e=Object(n.useContext)(u),t=e.handleFilterName,a=e.handleColumnFilter,l=e.applyFilterNumber,c=e.numberFilter,o=e.deletedFilter,i=e.restoreFilter,m=e.filterByNumber,s=e.handleSortFilter,d=e.applyFilterOrder,f=e.filtersColumn;return r.a.createElement("div",{className:"search-container"},r.a.createElement("h1",null,"StarWars Search Planets"),r.a.createElement("input",{"data-testid":"name-filter",type:"text",placeholder:"Search By Name",onChange:t}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l()}},r.a.createElement("select",{name:"column",onChange:a,"data-testid":"column-filter"},c.map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("select",{name:"comparison","data-testid":"comparison-filter",onChange:a},["maior que","igual a","menor que"].map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("input",{type:"number",name:"value",value:m.value,"data-testid":"value-filter",onChange:a}),r.a.createElement("button",{type:"submit","data-testid":"button-filter",disabled:0===c.length},"Filtrar")),o&&o.map((function(e){return r.a.createElement("label",{htmlFor:"'deleted-filter'",key:e.column,"data-testid":"filter"},"".concat(e.column," ").concat(e.comparison," ").concat(e.value),r.a.createElement("button",{type:"button",id:"deleted-filter",onClick:function(){return i(e)}},"X"))})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d()}},r.a.createElement("select",{name:"column",onChange:s,"data-testid":"column-sort"},f.map((function(e){return r.a.createElement("option",{key:e},e)}))),r.a.createElement("label",{htmlFor:"asc-radio"},r.a.createElement("input",{type:"radio",id:"asc-radio",name:"sort",value:"ASC",onClick:s,"data-testid":"column-sort-input-asc"}),"Ascendente"),r.a.createElement("label",{htmlFor:"desc-radio"},r.a.createElement("input",{type:"radio",name:"sort",id:"desc-radio",value:"DESC",onClick:s,"data-testid":"column-sort-input-desc"}),"Descendente"),r.a.createElement("button",{type:"submit","data-testid":"column-sort-button"},"Ordenar")))}a(19);var j=function(){return r.a.createElement(h,null,r.a.createElement(O,null),r.a.createElement(o,null))};c.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.371dff57.chunk.js.map